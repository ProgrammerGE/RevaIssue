<app-nav-bar></app-nav-bar>

<div class="hub-page">
  <div class="popup">
    <app-create-project></app-create-project>
  </div>
  <header class="hub-header">
    <div>
      <h2 class="welcome-message">Welcome, {{ username() | capitalizeFirst }}</h2>
      <span>{{ userRole() }}</span>
    </div>
    <div class="filter">
      <input type="search" [(ngModel)]="searchFilter" class="filterInput" />
      <button (click)="filterList()" class="filterButton">Filter Issues</button>
    </div>
  </header>
  <section class="lists">
    <app-list-container
      title="Projects"
      [items]="projectsList()"
      [hasButton]="true"
      [itemClicked]="goToProject"
      [userRole] = "userRole()"
    >
    </app-list-container>
    <app-list-container
      title="Issues"
      [items]="issuesList()"
      [hasButton]="false"
      [itemClicked]="goToProject"
    ></app-list-container>
  </section>
  @if(isAdmin()){
  <section class="audit-logs">
    <h4 style="margin-left: 10px">Audit Logs</h4>
    @for (item of auditLogs(); track $index) {
    {{ item.role }}: {{ item.username }} {{ item.action }} at {{ item.timeLogged }} <br />
    }
  </section>
  }
</div>
